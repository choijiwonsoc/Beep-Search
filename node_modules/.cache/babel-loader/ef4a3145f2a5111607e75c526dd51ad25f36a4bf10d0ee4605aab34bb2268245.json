{"ast":null,"code":"var _jsxFileName = \"/Users/choijiwon/my-projects/autocomplete-component/src/components/Autocomplete.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport styles from './Autocomplete.module.css';\nimport debounce from '../utils/debounce';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Autocomplete = ({\n  placeholder,\n  disabled,\n  loading,\n  handleOptionClick,\n  renderOption,\n  description,\n  options = [],\n  // Default to empty array for local options\n  searchMode,\n  asyncSearch\n}) => {\n  _s();\n  const [inputValue, setInputValue] = useState('');\n  const [isFocused, setIsFocused] = useState(false);\n  const [filteredOptions, setFilteredOptions] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const handleFocus = () => {\n    setIsFocused(true);\n  };\n  const handleBlur = () => {\n    setTimeout(() => setIsFocused(false), 100);\n  };\n  const fetchOptions = async query => {\n    if (asyncSearch) {\n      setIsLoading(true);\n      const data = await asyncSearch(query);\n      setFilteredOptions(data);\n      setIsLoading(false);\n    }\n  };\n  const debouncedFetchOptions = useCallback(debounce(fetchOptions, 300), []);\n  const filterLocalOptions = query => {\n    setFilteredOptions(options.filter(option => option.label.toLowerCase().includes(query.toLowerCase())));\n  };\n  const handleInputChange = event => {\n    const {\n      value\n    } = event.target;\n    setInputValue(value);\n    if (value.trim()) {\n      if (searchMode === 'async') {\n        debouncedFetchOptions(value);\n      } else {\n        filterLocalOptions(value);\n      }\n    } else {\n      setFilteredOptions([]);\n    }\n  };\n  useEffect(() => {\n    const handleClickOutside = event => {\n      var _document$getElementB;\n      if (!((_document$getElementB = document.getElementById('autocomplete-container')) !== null && _document$getElementB !== void 0 && _document$getElementB.contains(event.target))) {\n        setIsFocused(false);\n      }\n    };\n    if (isFocused) {\n      document.addEventListener('mousedown', handleClickOutside);\n    } else {\n      document.removeEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isFocused]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"autocomplete-container\",\n    className: `w-full max-w-md mx-auto p-4 border rounded bg-white shadow-md ${styles.autocomplete}`,\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: `${styles.label} block mb-2 font-bold`,\n      children: \"Search:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: inputValue,\n      onChange: handleInputChange,\n      placeholder: placeholder,\n      disabled: disabled,\n      onFocus: handleFocus,\n      onBlur: handleBlur,\n      className: \"w-full p-2 border rounded\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spinner\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }, this), isFocused && filteredOptions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"autocomplete-options mt-2 absolute z-10 w-full border rounded bg-white shadow-lg\",\n      children: filteredOptions.map(option => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-2 cursor-pointer transition duration-300 ease-out hover:bg-gray-100\",\n        onMouseDown: () => handleOptionClick(option),\n        children: renderOption(option)\n      }, option.value, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this), description && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"description mt-2\",\n      children: description\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 23\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n_s(Autocomplete, \"zeSnd/u/xZHim45V8ltyUySaOsQ=\");\n_c = Autocomplete;\nexport default Autocomplete;\nexport {};\nvar _c;\n$RefreshReg$(_c, \"Autocomplete\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","styles","debounce","jsxDEV","_jsxDEV","Autocomplete","placeholder","disabled","loading","handleOptionClick","renderOption","description","options","searchMode","asyncSearch","_s","inputValue","setInputValue","isFocused","setIsFocused","filteredOptions","setFilteredOptions","isLoading","setIsLoading","handleFocus","handleBlur","setTimeout","fetchOptions","query","data","debouncedFetchOptions","filterLocalOptions","filter","option","label","toLowerCase","includes","handleInputChange","event","value","target","trim","handleClickOutside","_document$getElementB","document","getElementById","contains","addEventListener","removeEventListener","id","className","autocomplete","children","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","onFocus","onBlur","length","map","onMouseDown","_c","$RefreshReg$"],"sources":["/Users/choijiwon/my-projects/autocomplete-component/src/components/Autocomplete.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport styles from './Autocomplete.module.css';\nimport debounce from '../utils/debounce';\n\nexport interface Option {\n  value: string;\n  label: string;\n}\n\ninterface AutocompleteProps {\n    description: string;\n    options: Option[];\n    placeholder: string;\n    disabled: boolean;\n    filterOptions?: (options: Option[], inputValue: string) => Option[];\n    label: string;\n    loading: boolean;\n    multiple: boolean;\n    onChange: (selected: Option | Option[]) => void;\n    onInputChange: (inputValue: string) => void;\n    renderOption: (option: Option) => React.ReactNode;\n    value: Option | Option[];\n    searchMode: 'local' | 'async';\n    asyncSearch?: (query: string) => Promise<Option[]>;\n    handleOptionClick: (option: Option) => void;\n}\n\nconst Autocomplete: React.FC<AutocompleteProps> = ({\n  placeholder,\n  disabled,\n  loading,\n  handleOptionClick,\n  renderOption,\n  description,\n  options = [], // Default to empty array for local options\n  searchMode,\n  asyncSearch,\n}) => {\n  const [inputValue, setInputValue] = useState('');\n  const [isFocused, setIsFocused] = useState(false);\n  const [filteredOptions, setFilteredOptions] = useState<Option[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleFocus = () => {\n    setIsFocused(true);\n  };\n\n  const handleBlur = () => {\n    setTimeout(() => setIsFocused(false), 100);\n  };\n\n  const fetchOptions = async (query: string) => {\n    if (asyncSearch) {\n      setIsLoading(true);\n      const data = await asyncSearch(query);\n      setFilteredOptions(data);\n      setIsLoading(false);\n    }\n  };\n\n  const debouncedFetchOptions = useCallback(debounce(fetchOptions, 300), []);\n\n  const filterLocalOptions = (query: string) => {\n    setFilteredOptions(options.filter(option => \n      option.label.toLowerCase().includes(query.toLowerCase())\n    ));\n  };\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const { value } = event.target;\n    setInputValue(value);\n    if (value.trim()) {\n      if (searchMode === 'async') {\n        debouncedFetchOptions(value);\n      } else {\n        filterLocalOptions(value);\n      }\n    } else {\n      setFilteredOptions([]);\n    }\n  };\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (!document.getElementById('autocomplete-container')?.contains(event.target as Node)) {\n        setIsFocused(false);\n      }\n    };\n\n    if (isFocused) {\n      document.addEventListener('mousedown', handleClickOutside);\n    } else {\n      document.removeEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isFocused]);\n\n  return (\n    <div id=\"autocomplete-container\" className={`w-full max-w-md mx-auto p-4 border rounded bg-white shadow-md ${styles.autocomplete}`}>\n      <label className={`${styles.label} block mb-2 font-bold`}>Search:</label>\n      <input\n        type=\"text\"\n        value={inputValue}\n        onChange={handleInputChange}\n        placeholder={placeholder}\n        disabled={disabled}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        className=\"w-full p-2 border rounded\"\n      />\n      {isLoading && <div className=\"spinner\">Loading...</div>}\n      {isFocused && filteredOptions.length > 0 && (\n        <div className=\"autocomplete-options mt-2 absolute z-10 w-full border rounded bg-white shadow-lg\">\n          {filteredOptions.map(option => (\n            <div\n              key={option.value}\n              className=\"p-2 cursor-pointer transition duration-300 ease-out hover:bg-gray-100\"\n              onMouseDown={() => handleOptionClick(option)}\n            >\n              {renderOption(option)}\n            </div>\n          ))}\n        </div>\n      )}\n      {description && <div className=\"description mt-2\">{description}</div>}\n    </div>\n  );\n};\n\nexport default Autocomplete;\n\nexport { };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}